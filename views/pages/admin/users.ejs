<!DOCTYPE html>
<html lang="en">

<head>
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="/css/admin_page.css">
</head>

<body>
    <!-- Admin Sidebar -->
    <%- include('./partials/sidebar') %>

        <div class="main-content">

            <!-- Users List -->
            <div class="mt-4">
                <h3>All Users</h3>
                <table class="table table-bordered table-striped">
                    <thead class="bg-dark text-white">
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% users.forEach(user=> { %>
                            <tr>
                                <td>
                                    <%= user._id %>
                                </td>
                                <td>
                                    <%= user.name %>
                                </td>
                                <td>
                                    <%= user.email %>
                                </td>
                                <td>
                                    <%= user.role %>
                                </td>
                                <td>
                                    <a href="/admin/edit-user/<%= user._id %>/1111"
                                        class="btn btn-sm btn-warning">Toggle
                                        Role</a>
                                    <a href="/admin/delete-user/<%= user._id %>/1111" class="btn btn-sm btn-danger"
                                        onclick="return confirm('Are you sure?')">Delete</a>
                                </td>
                            </tr>
                            <% }) %>
                    </tbody>
                </table>
            </div>
        </div>

</body>

</html>

<script src="/js/admin_page.js"></script>

<script>

    document.addEventListener("DOMContentLoaded", function () {

        // ðŸ”¹ Check for error message in URL
        const urlParams = new URLSearchParams(window.location.search);
        const errorMessage = urlParams.get("error");
        if (errorMessage) {
            showPopup(decodeURIComponent(errorMessage), "red", "white", "/admin/products/1111");
        }
    });
</script>