<!DOCTYPE html>
<html lang="en">

<head>
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="/css/admin_page.css">
</head>

<body>
    <!-- Admin Sidebar -->
    <%- include('./partials/sidebar') %>

        <div class="main-content">

            <!-- Users List -->
            <div class="mt-4">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                    <h3>All Products</h3>
                    <a href="/admin/add-product/1111"
                        style="padding: 4px 20px; background-color: red; text-decoration: none; color: white;">Add</a>
                </div>
                <table class="table table-bordered table-striped">
                    <thead class="bg-dark text-white">
                        <tr>
                            <th>ID</th>
                            <th>IMAGE</th>
                            <th>Name</th>
                            <th>MANUFACTURER</th>
                            <th>QUANTITY</th>
                            <th>PRICE</th>
                            <th>MRP</th>
                            <th>DISCOUNT</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% products.forEach(product=> { %>
                            <tr>
                                <td>
                                    <%= product._id %>
                                </td>
                                <td>
                                    <img src="<%= product.image %>" alt="Product Image" width="60">
                                </td>
                                <td>
                                    <%= product.name %>
                                </td>
                                <td>
                                    <%= product.manufacturer %>
                                </td>
                                <td>
                                    <%= product.quantity %>
                                </td>
                                <td>
                                    <%= product.price %>
                                </td>
                                <td>
                                    <%= product.mrp %>
                                </td>
                                <td>
                                    <%= product.discount %>
                                </td>
                                <td>
                                    <a href="/admin/edit-product/<%= product._id %>/1111"
                                        class="btn btn-sm btn-warning">Edit</a>
                                    <a href="/admin/delete-product/<%= product._id %>/1111"
                                        class="btn btn-sm btn-danger"
                                        onclick="return confirm('Are you sure?')">Delete</a>
                                </td>
                            </tr>
                            <% }) %>
                    </tbody>
                </table>
            </div>
        </div>

</body>

</html>

<script src="/js/admin_page.js"></script>

<script>

    document.addEventListener("DOMContentLoaded", function () {

        // ðŸ”¹ Check for error message in URL
        const urlParams = new URLSearchParams(window.location.search);
        const errorMessage = urlParams.get("error");
        if (errorMessage) {
            showPopup(decodeURIComponent(errorMessage), "red", "white", "/admin/products/1111");
        }
    });
</script>